<!Doctype html>
<html xmlns:th="http://thymeleaf.org"
      xmlns:layout="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="utf-8"/>
  <title>홈</title>

  <!--  CSS-->
  <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet">

  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/5.4.5/css/swiper.min.css">
</head>
<body layout:fragment="content">
<nav th:replace="~{navbar :: navbarFragment}"></nav>
<div class="d-flex justify-content-center align-items-center" id="main_index_back">
  <section id="searchFlight">
    <div class="card card-4" style="height: 100%; height: 100%;background-color: #e7f5fac7;">
      <div class="tab-content">
        <div class="tab-pane active" id="tab1">
          <div class="tab_wrap">

            <form th:action="@{/home}" method="post" th:object="${airForm}">
              <!-- 가는편/오는편 radioButton -->
              <div class="d-flex py-2">
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="roundWay" value="왕복" id="roundWay" checked th:field="*{roundWay}">
                  <label class="form-check-label"> 왕복</label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="oneWay" value="편도" id="oneWay" th:field="*{oneWay}">
                  <label class="form-check-label"> 편도</label>
                </div>
              </div>

              <!-- 출발지/도착지 : select -->
              <div id="index_body">
                <div class="container d-flex justify-content-between">
                  <div class="start_departure">
                    <div class="form-floating">
                      <select class="form-select" name="departure" id="departure" aria-label="Floating label select example" th:field="*{departure}">
                        <option value="출발지" selected>출발지</option>
                        <option value="김포">김포</option>
                        <option value="제주">제주</option>
                        <option value="울산">울산</option>
                        <option value="부산">부산</option>
                        <option value="여수">여수</option>
                      </select>
                      <label for="departure">출발지</label>
                    </div>
                  </div>

                  <div class="end_departure">
                    <div class="form-floating">
                      <select class="form-select" name="arrival" id="arrival" aria-label="Floating label select example" th:field="*{arrival}">
                        <option value="도착지" selected>도착지</option>
                        <option value="김포">김포</option>
                        <option value="제주">제주</option>
                        <option value="울산">울산</option>
                        <option value="부산">부산</option>
                        <option value="여수">여수</option>
                      </select>
                      <label for="arrival">도착지</label>
                    </div>
                  </div>

                  <!-- 여정 : 달력 -->
                  <div class="calander">
                    <div class="form-floating">
                      <input class="form-control" type="text" name="departureDate1" placeholder="yyyy/mm/dd" id="input-start" th:field="*{departureDate1}">
                      <input class="form-control d-none" type="text" name="departureDate2" placeholder="yyyy/mm/dd" id="input-day" disabled th:field="*{departureDate2}">
                      <label for="input-start">여정</label>
                    </div>
                  </div>

                  <!-- 탑승객 -->
                  <div class="passenger">
                    <div class="start_departure">
                      <div class="form-floating">
                        <select class="form-select" name="passenger" id="passenger" aria-label="Floating label select example" th:field="*{passenger}">
                          <option value="1" selected>탑승객</option>
                          <option value="1">1</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5</option>
                        </select>
                        <label for="passenger">탑승객</label>
                      </div>
                    </div>
                  </div>
                </div>
              </div>


              <script src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>
              <script>
                $(document).ready(function() {
                  $('#icon_click').on('click', function() {
                    // alert('a')
                    $('.number_box').show();
                  });

                  $('.down').click(function(e) {
                    e.preventDefault();
                    var input = $('#adult');
                    if(input.val() < input.attr('max')) {
                      input.val(parseInt(input.val()) - 1);
                    }
                    if(input.val() <= 1) {
                      input.val(1);
                    }
                  })
                  $('.up').click(function(e) {
                    e.preventDefault();
                    var input = $('#adult');
                    if(input.val() >= input.attr('min')) {
                      input.val(parseInt(input.val()) + 1);
                    }
                    if(input.val() <= 1) {
                      input.val(1);
                    }
                  })
                })
              </script>
              <!-- 검색 버튼 -->
              <div class="search_btn pt-2">
                <button type="submit" class="btn btn-primary">검색</button>
              </div>
            </form>

          </div>
        </div>
      </div>
    </div>
  </section>
</div>
<footer th:replace="~{footer :: footerFragment}"></footer>

<script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/3.4.2/js/swiper.min.js"></script>

<script type="text/javascript">

  initDatePicker()
  initDay()

  function initDay() {
    $('#input-day').daterangepicker({
      "singleDatePicker" :true,
      "autoApply" : true,
      "minYear": 1000,
      "maxYear": 9999,
      "locale": {
        "format": 'YYYY.MM.DD',
        "separator": "~",
        "applyLabel": "확인",
        "cancelLabel": "취소",
        "fromLabel": "From",
        "toLabel": "To",
        "customRangeLabel": "Custom",
        "weekLabel": "주",
        "daysOfWeek": [
          "일",
          "월",
          "화",
          "수",
          "목",
          "금",
          "토"
        ],
        "monthNames": [
          "1월",
          "2월",
          "3월",
          "4월",
          "5월",
          "6월",
          "7월",
          "8월",
          "9월",
          "10월",
          "11월",
          "12월"
        ],
        "firstDay": 1
      },
    }, function(start, end, label) {
      console.log('New date range selected: ' + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD') + ' (predefined range: ' + label + ')');
    });
  }

  function initDatePicker() {
    $('#input-start').daterangepicker({
      "singleDatePicker" :false,
      "autoApply" : false,
      "minYear": 1000,
      "maxYear": 9999,
      "locale": {
        "format": 'YYYY.MM.DD',
        "separator": "~",
        "applyLabel": "확인",
        "cancelLabel": "취소",
        "fromLabel": "From",
        "toLabel": "To",
        "customRangeLabel": "Custom",
        "weekLabel": "주",
        "daysOfWeek": [
          "일",
          "월",
          "화",
          "수",
          "목",
          "금",
          "토"
        ],
        "monthNames": [
          "1월",
          "2월",
          "3월",
          "4월",
          "5월",
          "6월",
          "7월",
          "8월",
          "9월",
          "10월",
          "11월",
          "12월"
        ],
        "firstDay": 1
      },
    }, function(start, end, label) {
      console.log('New date range selected: ' + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD') + ' (predefined range: ' + label + ')');
    });

  }

  $('input:radio[name=roundTrip]').click(function(){
    // 편도
    if($('#eachWay').is(":checked")){
      $('#input-day').removeClass('d-none')
      $('#input-start').addClass('d-none')

      $('#input-day').removeAttr('disabled')
      $('#input-start').attr('disabled', 'disabled')


    }
    // 왕복
    else{
      $('#input-day').addClass('d-none')
      $('#input-start').removeClass('d-none')

      $('#input-start').removeAttr('disabled')
      $('#input-day').attr('disabled', 'disabled')
    }
  });



</script>
</body>
</html>